在不了解基础知识的情况下，我们现在将重点介绍面向对象的JavaScript（OOJS）-本文介绍了面向对象的编程（OOP）理论的基本观点，然后探讨了JavaScript如何通过构造函数来仿真对象类，以及如何创建对象实例。

| 先决条件： | 基本的计算机知识，对HTML和CSS的基本理解，对JavaScript的基础知识（请参阅“ [第一步](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/First_steps)和[构建模块”](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks)）和OOJS的基础知识（请参见[“对象简介”](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Object-oriented/Introduction)）。 |
| :--------- | ------------------------------------------------------------ |
| 目的：     | 要了解面向对象编程背后的基本理论，它与JavaScript（“一切都是对象”）之间的关系以及如何创建构造函数和对象实例。 |

## 面向对象编程-基础

首先，让我们简单地了解什么是面向对象编程（OOP）。我们说的很简单，因为OOP很快就会变得非常复杂，而现在对其进行全面处理可能会给我们带来更多混乱。OOP的基本思想是，我们使用对象来建模要在程序中表示的现实世界中的事物，和/或提供一种简单的方法来访问原本很难或不可能利用的功能。

对象可以包含相关的数据和代码，这些数据和代码表示有关您要建模的事物以及所需功能或行为的信息。对象数据（通常也包括函数）可以整齐地存储（将官方单词**封装**）在对象包中（可以给它指定一个特定的名称，有时也称为**命名空间**），这使得结构和构造变得容易。访问; 对象也通常用作可以轻松通过网络发送的数据存储。

### 定义对象模板



让我们考虑一个简单的程序，该程序显示有关学校中的学生和老师的信息。在这里，我们将大致看待OOP理论，而不是在任何特定的编程语言的上下文中。

首先，我们可以从[第一篇对象文章](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Basics)返回我们的Person对象类型，该[文章](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Basics)定义了人员的通用数据和功能。您*可能会*了解一个人很多事情（他们的地址，身高，鞋子的大小，DNA档案，护照号码，重要的人格特质...），但是在这种情况下，我们只希望显示其姓名，年龄，性别以及兴趣，我们还希望能够根据这些数据撰写有关它们的简短介绍，并让他们打招呼。这就是所谓的**抽象** -创建更复杂事物的简单模型，以易于使用的方式表示其最重要的方面，以达到我们程序的目的。

![img](https://mdn.mozillademos.org/files/13889/person-diagram.png)

### 创建实际对象



从我们的类中，我们可以创建**对象实例** -包含类中定义的数据和功能的对象。现在，从Person类中，我们可以创建一些实际的人：

![img](https://mdn.mozillademos.org/files/15163/MDN-Graphics-instantiation-2-fixed.png)

从类创建对象实例时，将运行该类的**构造函数**来创建它。从创建一个类的对象实例的这一过程称为**实例化** -对象实例被**实例化**从类。

### 专科课程



在这种情况下，我们不想要普通人，而是想要老师和学生，他们都是更特定的人。在OOP中，我们可以基于其他类创建新类- 可以使这些新的**子类****继承****其父类**的数据和代码功能，因此您可以重用所有对象类型共有的功能，而不必重复它们。如果类之间的功能不同，则可以根据需要直接在其上定义专用功能。

![img](https://mdn.mozillademos.org/files/13881/MDN-Graphics-inherited-3.png)

这真的很有用-老师和学生拥有许多共同的特征，例如姓名，性别和年龄，因此只需要定义一次这些特征就很方便。您还可以在不同的类中分别定义相同的功能，因为该功能的每个定义将位于不同的名称空间中。例如，学生的问候语可能采用“ Yo，I'm [firstName]”的形式（例如，*Yo，我是Sam*），而老师的问候语可能使用更正式的形式，例如“ Hello，我的名字是[Prefix] ] [lastName]，我教[Subject]。” （例如，*您好，我叫格里菲斯先生，我教化学*）。

**注意**：多种对象类型实现相同功能的能力的奇特词是**多态性**。以防万一您想知道。

现在，您可以从子类中创建对象实例。例如：

![img](https://mdn.mozillademos.org/files/13885/MDN-Graphics-instantiation-teacher-3.png)

在本文的其余部分，我们将开始研究如何在JavaScript中将OOP理论付诸实践。

## 构造函数和对象实例

JavaScript使用称为**构造函数的**特殊函数来定义和初始化对象及其功能。它们非常有用，因为您经常会遇到不知道将要创建多少个对象的情况。构造函数提供了一种有效创建所需对象的方法，可以根据需要将数据和功能附加到它们。

让我们探索通过构造函数创建类并在JavaScript中从中创建对象实例。首先，我们希望您为我们在第一篇“对象”文章中看到的[oojs.html](https://github.com/mdn/learning-area/blob/master/javascript/oojs/introduction/oojs.html)文件创建新的本地副本。

### 一个简单的例子



1. 让我们从如何定义具有正常功能的人开始。在

   ```
   script
   ```

   元素中添加以下功能：

   ```js
   function createNewPerson(name) {
     const obj = {};
     obj.name = name;
     obj.greeting = function() {
       alert('Hi! I\'m ' + obj.name + '.');
     };
     return obj;
   }
   ```

2. 现在，您可以通过调用此函数来创建新用户-在浏览器的JavaScript控制台中尝试以下几行：

   ```js
   const salva = createNewPerson('Salva');
   salva.name;
   salva.greeting();
   ```

   这已经足够好了，但是有点长。如果知道要创建一个对象，为什么我们需要显式创建一个新的空对象并返回它？幸运的是，JavaScript以构造函数的形式为我们提供了方便的快捷方式-现在让我们开始吧！

3. 用以下内容替换以前的功能：

   ```js
   function Person(name) {
     this.name = name;
     this.greeting = function() {
       alert('Hi! I\'m ' + this.name + '.');
     };
   }
   ```

构造函数是JavaScript的类版本。请注意，它具有函数中期望的所有功能，尽管它不返回任何内容或显式创建对象-基本上只是定义属性和方法。还要注意`this`这里也使用了关键字-基本上是说，每当创建这些对象实例之一时，对象的`name`属性将等于传递给构造函数调用的名称值，并且该`greeting()`方法将使用传递给构造函数调用的名称值构造函数调用。

**注意**：构造函数名称通常以大写字母开头-此约定用于使构造函数在代码中更易于识别。

那么我们如何调用构造函数来创建一些对象呢？

1. 在您之前的代码添加下面添加以下行：

   ```js
   let person1 = new Person('Bob');
   let person2 = new Person('Sarah');
   ```

2. 保存代码并将其重新加载到浏览器中，然后尝试在JS控制台中输入以下行：

   ```js
   person1.name
   person1.greeting()
   person2.name
   person2.greeting()
   ```

凉！现在您可以看到页面上有两个新对象，每个对象存储在不同的命名空间下-当您访问它们的属性和方法时，必须使用`person1`或`person2`; 开始调用。内含的功能已整齐打包，因此不会与其他功能冲突。但是，它们具有可用的相同`name`属性和`greeting()`方法。请注意，它们使用的`name`是创建时分配给他们的值。这就是为什么使用非常重要的原因之一`this`，因此每个人都使用自己的价值，而不是其他一些价值。

让我们再次看一下构造函数调用：

```js
let person1 = new Person('Bob');
let person2 = new Person('Sarah');
```

在每种情况下，`new`关键字都用于告诉浏览器我们要创建一个新的对象实例，其后是函数名称，其所需参数包含在括号中，并将结果存储在变量中-与标准函数的用法非常相似叫做。每个实例都是根据以下定义创建的：

```js
function Person(name) {
  this.name = name;
  this.greeting = function() {
    alert('Hi! I\'m ' + this.name + '.');
  };
}
```

创建新对象后，`person1`和`person2`变量包含以下对象：

```js
{
  name: 'Bob',
  greeting: function() {
    alert('Hi! I\'m ' + this.name + '.');
  }
}

{
  name: 'Sarah',
  greeting: function() {
    alert('Hi! I\'m ' + this.name + '.');
  }
}
```

请注意，当我们调用构造函数时，我们`greeting()`每次都在定义，这并不理想。为避免这种情况，我们可以在原型上定义函数，稍后我们将进行介绍。

### 创建我们完成的构造函数



我们上面看过的示例只是一个入门的简单示例。现在开始创建最终的`Person()`构造函数。

1. 删除您到目前为止插入的代码，并添加此替换构造函数—这在原理上与简单示例完全相同，只是稍微复杂一点：

   ```js
   function Person(first, last, age, gender, interests) {
     this.name = {
        first : first,
        last : last
     };
     this.age = age;
     this.gender = gender;
     this.interests = interests;
     this.bio = function() {
       alert(this.name.first + ' ' + this.name.last + ' is ' + this.age + ' years old. He likes ' + this.interests[0] + ' and ' + this.interests[1] + '.');
     };
     this.greeting = function() {
       alert('Hi! I\'m ' + this.name.first + '.');
     };
   }
   ```

2. 现在，在其下面添加以下行，以从中创建对象实例：

   ```js
   let person1 = new Person('Bob', 'Smith', 32, 'male', ['music', 'skiing']);
   ```

现在您可以看到，您可以像以前一样访问属性和方法-在JS控制台中尝试以下操作：

```js
person1['age']
person1.interests[1]
person1.bio()
// etc.
```

**注意**：如果您无法正常使用它，请尝试将您的代码与我们的版本进行比较—请参阅[oojs-class-finished.html](https://github.com/mdn/learning-area/blob/master/javascript/oojs/introduction/oojs-class-finished.html)（另[请参见实时运行](http://mdn.github.io/learning-area/javascript/oojs/introduction/oojs-class-finished.html)）。

### 进一步练习



首先，尝试添加更多自己的对象创建行，并尝试获取和设置结果对象实例的成员。

此外，我们的`bio()`方法还存在一些问题-即使您的人是女性，输出始终包含代词“ He”，或其他一些喜欢的性别分类。并且该生物仅包括两个兴趣，即使`interests`阵列中列出了更多兴趣。您能解决如何在类定义（构造函数）中解决此问题吗？您可以将任何您喜欢的代码放入构造函数中（您可能需要一些条件和循环）。考虑如何根据性别以及列出的兴趣点数是1、2还是大于2来改变句子的结构。

**注意**：如果您遇到困难，我们已经[在GitHub存储库中](https://github.com/mdn/learning-area/blob/master/javascript/oojs/introduction/oojs-class-further-exercises.html)提供了一个[答案](https://github.com/mdn/learning-area/blob/master/javascript/oojs/introduction/oojs-class-further-exercises.html)（[请实时查看](http://mdn.github.io/learning-area/javascript/oojs/introduction/oojs-class-further-exercises.html)），不过请尝试自己编写！

## 创建对象实例的其他方式

到目前为止，我们已经看到了创建对象实例的两种不同方法- [声明对象文字](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Basics#Object_basics)，以及使用构造函数（请参见上文）。

这些是有道理的，但是还有其他方法-如果您在网上旅行时遇到它们，我们希望让您熟悉这些。

### Object（）构造函数



首先，可以使用`Object()`构造函数创建一个新对象。是的，即使通用对象也具有构造函数，该构造函数会生成一个空对象。

1. 尝试将其输入到浏览器的JavaScript控制台中：

   ```js
   let person1 = new Object();
   ```

2. 这会将一个空对象存储在

   ```
   person1
   ```

   变量中。然后，您可以根据需要使用点或括号表示法向该对象添加属性和方法。在控制台中尝试以下示例：

   ```js
   person1.name = 'Chris';
   person1['age'] = 38;
   person1.greeting = function() {
     alert('Hi! I\'m ' + this.name + '.');
   };
   ```

3. 您还可以将对象文字

   ```
   Object()
   ```

   作为参数传递给构造函数，以用属性/方法预先填充它。在您的JS控制台中尝试以下操作：

   ```js
   let person1 = new Object({
     name: 'Chris',
     age: 38,
     greeting: function() {
       alert('Hi! I\'m ' + this.name + '.');
     }
   });
   ```

### 使用create（）方法



构造函数可以帮助您指定代码顺序-您可以在一处创建构造函数，然后根据需要创建实例，并且很清楚它们来自何处。

但是，有些人更喜欢先创建对象实例而不必先创建构造函数，尤其是当他们仅创建对象的几个实例时。JavaScript有一个称为的内置方法`create()`，您可以执行此操作。使用它，您可以基于任何现有对象创建一个新对象。

1. 在浏览器中加载了前面各节中的练习之后，请在JavaScript控制台中尝试以下操作：

   ```js
   let person2 = Object.create(person1);
   ```

2. 现在尝试这些：

   ```js
   person2.name;
   person2.greeting();
   ```

您将看到它`person2`是基于创建的，`person1`它具有可用的相同属性和方法。

的限制之一`create()`是IE8不支持它。因此，如果您想支持较旧的浏览器，构造函数可能会更有效。

稍后，我们将详细探讨的效果`create()`。