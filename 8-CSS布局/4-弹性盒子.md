[Flexbox]( /CSS_Flexible_Box_Layout) 是一种用于按行或列布局项目的一[维布]( /CSS_Flexible_Box_Layout)局方法。物品可以弯曲以填充额外的空间，并收缩以适合较小的空间。本文介绍了所有基础知识。

| 先决条件： | HTML基础知识（研究[HTML简介），以及关于CSS如何工作的想法（研究[CSS简介）。 |
| :--------- | ------------------------------------------------------------ |
| 目的：     | 了解如何使用Flexbox布局系统创建Web布局。                     |

## 为什么选择Flexbox？

长期以来，可用于创建CSS布局的唯一可靠的跨浏览器兼容工具是[floats和[position。这些很好并且可以工作，但是在某些方面它们也相当局限和令人沮丧。

使用这种工具以任何方便，灵活的方式很难或不可能实现以下简单的布局要求：

- 在其父级内部将内容块垂直居中。
- 无论容器有多少宽度/高度，使容器的所有子容器都占用相等的可用宽度/高度。
- 使多列布局中的所有列都采用相同的高度，即使它们包含不同数量的内容。

正如您将在后续章节中看到的那样，flexbox使许多布局任务变得更加容易。让我们开始吧！

## 介绍一个简单的例子

在本文中，我们将指导您完成一系列练习，以帮助您了解flexbox的工作方式。首先，您应该制作第一个启动文件的本地副本- 来自我们的github存储库中的[flexbox0.html-将](https://github.com/mdn/learning-area/blob/master/css/css-layout/flexbox/flexbox0.html)其加载到现代浏览器（如Firefox或Chrome）中，然后在代码编辑器中查看代码。您也可以[在这里看到它](http://mdn.github.io/learning-area/css/css-layout/flexbox/flexbox0.html)。

您会看到，我们有一个`<header>`元素，其中带有顶层标题，而`<section>`元素包含三个`<article>`。我们将使用它们来创建相当标准的三列布局。

![img](https://mdn.mozillademos.org/files/13406/flexbox-example1.png)

## 指定要布置为灵活框的元素

首先，我们需要选择将哪些元素布置为灵活的框。为此，我们[`display`]( /display)在要影响的元素的父元素上设置一个特殊的值。在这种情况下，我们希望对`<article>`元素进行布局，因此将其设置在`<section>`（将成为flex容器）上：

```css
section {
  display: flex;
}
```

结果应该是这样的：

![img](https://mdn.mozillademos.org/files/13408/flexbox-example2.png)

因此，这个单一声明为我们提供了我们需要的一切-不可思议，对吧？我们的多列布局具有相等大小的列，并且列的高度均相同。这是因为设置给弹性项目（弹性容器的子代）的默认值是为了解决诸如此类的常见问题。以后再说。

**注意**：如果您希望将内联项布置为灵活框[`display`]( /display)，`inline-flex`则还可以设置值。

## 弹性模型的旁白

将元素布置为柔性箱时，它们沿两个轴布置：

![flex_terms.png](1/files/3739/flex_terms.png)

- 的**主轴线**是柔性的数据项都被中布局的方向运行轴（例如，作为跨页的行，或一页列。）该轴的开始和结束分别称为**主起动**和**主端**。
- 的**横轴**是垂直于所述柔性物品在被布局的方向运行的轴。该轴的开始和结束分别称为**交叉开始**和**横端**。
- 在其上`display: flex`设置的父元素（`<section>`在我们的示例中为）称为**flex container**。
- 在flex容器内作为柔性框布置的项目称为**flex项目**（`<article>`在我们的示例中为元素）。

## 列还是行？

Flexbox提供了一个名为的属性[`flex-direction`]( /flex-direction)，用于指定主轴的运行方向（Flexbox子级的放置方向）—默认情况下，此属性设置为`row`，这将导致它们沿浏览器默认语言的方向排成一行（在英文浏览器中为从左到右）。

尝试在`<section>`规则中添加以下声明：

```css
flex-direction: column;
```

您会看到，这会将项目放回到列布局中，就像它们在添加任何CSS之前一样。在继续之前，请从示例中删除此声明。

**注意**：您也可以使用`row-reverse`和`column-reverse`值以相反的方向布置弹性项目。也可以尝试这些值！

## 包装纸

当布局中的宽度或高度固定时出现的一个问题是，最终flexbox子级将溢出其容器，从而破坏布局。看一下我们的[flexbox-wrap0.html](https://github.com/mdn/learning-area/blob/master/css/css-layout/flexbox/flexbox-wrap0.html)示例，然后尝试[实时查看它](http://mdn.github.io/learning-area/css/css-layout/flexbox/flexbox-wrap0.html)（如果您想跟该示例一起使用，请立即获取此文件的本地副本）：

![img](https://mdn.mozillademos.org/files/13410/flexbox-example3.png)

在这里，我们看到孩子们确实在打破他们的容器。解决此问题的一种方法是在`<section>`规则中添加以下声明：

```css
flex-wrap: wrap;
```

另外，将以下声明添加到您的`<article>`规则中：

```css
flex: 200px;
```

立即尝试；您将看到包含以下内容的布局看起来要好得多：

![img](https://mdn.mozillademos.org/files/13412/flexbox-example4.png)现在，我们有了多行-尽可能多地在每行上安装了很多flexbox子级，并且所有溢出都向下移动到下一行。该`flex: 200px`宣言的条款意味着每个会至少200像素宽的设置; 我们将在稍后详细讨论该属性。您可能还会注意到，最后一行上的最后几个子级每个都变宽了，因此整行仍被填充。

但还有更多我们可以在这里做。首先，尝试将[`flex-direction`]( /flex-direction)属性值更改为`row-reverse`-现在您将看到您仍然具有多行布局，但是它是从浏览器窗口的对角开始的，并且反向流动。

## 弹性流速记

在这一点上，值得注意的是，速记存在[`flex-direction`]( /flex-direction)和[`flex-wrap`]( /flex-wrap)- [`flex-flow`]( /flex-flow)。因此，例如，您可以替换

```css
flex-direction: row;
flex-wrap: wrap;
```

与

```css
flex-flow: row wrap;
```

## 弹性项目的弹性尺寸

现在让我们回到第一个示例，看看如何控制空间弹性项目所占的比例。启动本地的[flexbox0.html](https://github.com/mdn/learning-area/blob/master/css/css-layout/flexbox/flexbox0.html)副本，或将[flexbox1.html](https://github.com/mdn/learning-area/blob/master/css/css-layout/flexbox/flexbox1.html)的副本作为新的起点（[现场观看](http://mdn.github.io/learning-area/css/css-layout/flexbox/flexbox1.html)）。

首先，将以下规则添加到CSS的底部：

```css
article {
  flex: 1;
}
```

这是一个无单位的比例值，它指示每个弹性项目沿主轴占用的可用空间量。在这种情况下，我们给每个[``元素一个值1，这意味着在设置了填充和边距之类的元素后，它们将全部占用相等的剩余空间。这是一个比例，这意味着为每个flex项目赋予400000值将具有完全相同的效果。

现在，在前一个规则下面添加以下规则：

```css
article:nth-of-type(3) {
  flex: 2;
}
```

现在，当您刷新时，您会看到第三个`<article>`占用的可用宽度是其他两个宽度的两倍-现在总共有四个比例单位。前两个flex项目各有一个，因此它们各自占用可用空间的1/4。第三个单元有两个单位，因此占用了2/4的可用空间（或1/2）。

您还可以在flex值内指定最小尺寸值。尝试更新现有的文章规则，如下所示：

```css
article {
  flex: 1 200px;
}

article:nth-of-type(3) {
  flex: 2 200px;
}
```

这基本上说：“将首先为每个弹性项目分配200px的可用空间。此后，其余的可用空间将根据比例单位进行分配。” 尝试刷新，您会发现共享空间的方式有所不同。

![img](https://mdn.mozillademos.org/files/13406/flexbox-example1.png)

flexbox的真正价值在于灵活性/响应能力-如果您调整浏览器窗口的大小或添加其他`<article>`元素，则布局仍然可以正常工作。

## flex：简写vs简写

[`flex`]( /flex) 是一种简写属性，最多可以指定三个不同的值：

- 上面我们讨论了无单位比例值。可以使用[`flex-grow`]( /flex-grow)longhand属性分别指定。
- 第二个无单位比例值- [`flex-shrink`]( /flex-shrink)当弹性项目溢出其容器时起作用。这指定从每个弹性项目的大小中除去多少溢出量，以阻止它们溢出其容器。这是相当高级的flexbox功能，在本文中我们将不再赘述。
- 我们上面讨论的最小大小值。可以使用[`flex-basis`]( /flex-basis)longhand值分别指定。

除非您确实需要（例如，重写先前设置的内容），否则建议不要使用longflex属性。它们导致编写了许多额外的代码，并且可能有些混乱。

## 水平和垂直对齐

您还可以使用flexbox功能使弹性项沿主轴或交叉轴对齐。让我们通过看一个新示例[flex-align0.html](https://github.com/mdn/learning-area/blob/master/css/css-layout/flexbox/flex-align0.html)（[也可以在线观看](http://mdn.github.io/learning-area/css/css-layout/flexbox/flex-align0.html)）来探索这一点，我们将把它变成一个简洁，灵活的按钮/工具栏。目前，您会看到一个水平菜单栏，其中一些按钮卡在了左上角。

![img](https://mdn.mozillademos.org/files/13414/flexbox-example5.png)

首先，获取此示例的本地副本。

现在，将以下内容添加到示例CSS的底部：

```css
div {
  display: flex;
  align-items: center;
  justify-content: space-around;
}
```

刷新页面，您将看到按钮现在在水平和垂直方向上都很好地居中了。我们通过两个新属性完成了此操作。

[`align-items`]( /align-items) 控制弹性项目在横轴上的位置。

- 默认情况下，值为`stretch`，它将拉伸所有弹性项目以在横轴方向上填充父项。如果父对象在横轴方向上没有固定宽度，则所有flex项目将与最长的flex项目一样长。这就是我们的第一个示例默认情况下如何获得等高列的方式。
- `center`我们在上面的代码中使用的值使项目保持其固有尺寸，但沿横轴居中。这就是我们当前示例的按钮垂直居中的原因。
- 您还可以使用`flex-start`和这样的值`flex-end`，它们将使所有项目分别在横轴的起点和终点对齐。有关[`align-items`]( /align-items)完整的信息，请参见。

您可以[`align-items`]( /align-items)通过将[`align-self`]( /align-self)属性应用于单个弹性项目来覆盖其行为。例如，尝试将以下内容添加到CSS：

```css
button:first-child {
  align-self: flex-end;
}
```

查看其效果，并在完成后再次将其删除。

[`justify-content`]( /justify-content) 控制弹性项目在主轴上的位置。

- 默认值为`flex-start`，这使所有项目都位于主轴的起点。
- 您可以`flex-end`用来使它们位于最后。
- `center`也是的值`justify-content`，它将使flex项目位于主轴的中心。
- 我们上面使用的值`space-around`很有用-它沿主轴均匀地分配所有项目，在两端留有一些空间。
- 还有另一个值，`space-between`该值`space-around`与之非常相似，不同之处在于它在两端均不留任何空间。

我们希望鼓励您使用这些价值观，在继续之前先了解它们的工作原理。

## 订购弹性物品

Flexbox还具有更改弹性项目的布局顺序而不影响源顺序的功能。这是传统布局方法无法完成的另一件事。

此代码很简单：尝试将以下CSS添加到按钮栏示例代码中：

```css
button:first-child {
  order: 1;
}
```

刷新，现在您将看到“微笑”按钮已移至主轴的末端。让我们更详细地讨论这是如何工作的：

- 默认情况下，所有弹性项目的[`order`]( /order)值均为0。
- 设置了较高顺序值的弹性项目将比具有较低顺序值的项目在显示顺序中出现得更晚。
- 具有相同订单值的弹性商品将以其源订单出现。因此，如果您有四个商品，其订单值分别设置为2、1、1和0，则它们的显示顺序将分别为4、2、3、1。
- 第三项出现在第二项之后，因为它具有相同的订单值，并且在源订单中位于第二项之后。

您可以设置负订单值，以使商品早于设置为0的商品出现。例如，可以使用以下规则使“腮红”按钮出现在主轴的起点：

```css
button:last-child {
  order: -1;
}
```

## 嵌套式柔性盒

可以使用flexbox创建一些非常复杂的布局。将flex项也设置为flex容器是完全可以的，这样它的子项也可以像柔性盒子一样放置。看看[complex-flexbox.html](https://github.com/mdn/learning-area/blob/master/css/css-layout/flexbox/complex-flexbox.html)（[也可以现场观看](http://mdn.github.io/learning-area/css/css-layout/flexbox/complex-flexbox.html)）。

![img](https://mdn.mozillademos.org/files/13418/flexbox-example7.png)

HTML非常简单。我们有一个`<section>`包含三个`<article>` 的元素。第三个`<article>`包含三个`<div>`。

```html
section - article
          article
          article - div - button   
                    div   button
                    div   button
                          button
                          button
```

让我们看看我们用于布局的代码。

首先，我们将的子级设置`<div>`为灵活的盒子。

```css
section {
  display: flex;
}
```

接下来，我们在`<article>`自身上设置一些flex值。在这里特别注意第二条规则-我们将第三条规则设置为`<article>`使其子项也像flex项一样布置，但是这次我们将它们像一列一样布置。

```css
article {
  flex: 1 200px;
}

article:nth-of-type(3) {
  flex: 3 200px;
  display: flex;
  flex-flow: column;
}
```

接下来，我们选择第一个`<div>`。我们首先使用`flex:1 100px;`有效地为其赋予最小高度100px，然后将其子`<button>`元素（元素）设置为也像flex项目一样进行布局。在这里，我们将它们放在包装行中，然后像在前面看到的单个按钮示例中那样，将它们对齐到可用空间的中心。

```css
article:nth-of-type(3) div:first-child {
  flex:1 100px;
  display: flex;
  flex-flow: row wrap;
  align-items: center;
  justify-content: space-around;
}
```

最后，我们在按钮上设置了一些大小，但是更有趣的是，我们将其flex值设置为1 auto。这会产生非常有趣的效果，如果您尝试调整浏览器窗口的宽度，则会看到该效果。这些按钮将占用尽可能多的空间，并尽可能多地位于同一行上，但是当它们不能再舒适地容纳在同一行上时，它们会下拉以创建新行。

```css
button {
  flex: 1 auto;
  margin: 5px;
  font-size: 18px;
  line-height: 1.5;
}
```

## 跨浏览器兼容性

大多数新的浏览器（Firefox，Chrome，Opera，Microsoft Edge和IE 11，较新版本的Android / iOS等）都提供Flexbox支持。但是，您应该注意，仍在使用较旧的浏览器，不支持Flexbox（或这样做，但支持它的旧版本，过时的版本。）

当您只是在学习和尝试时，这并不重要。但是，如果您考虑在实际网站中使用flexbox，则需要进行测试，并确保您的用户体验在尽可能多的浏览器中仍然可以接受。

Flexbox比某些CSS功能要复杂一些。例如，如果浏览器缺少CSS投影，则该站点可能仍将可用。但是，不支持flexbox功能可能会完全破坏布局，使其无法使用。

我们在[跨浏览器测试模块中讨论了解决跨浏览器支持问题的策略。